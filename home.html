<!DOCTYPE html>
<html>
<title>TechConnects</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/signup.css">
<link rel="stylesheet" href="css/colorbox.css">
<link rel="stylesheet" href="css/tc.css">
<style>


</style>

<body>
	
	<div class="topmenubanner-h">
		<div class="ltopmenu-h">
			<ul>
				<li><a class='inline' href="#inline_content"><em style="font-size: 20px;">AMIT SRIVASTAV</em></a></li>
			</ul>
		</div>
		<div class="rtopmenu-h">
			<ul>
				<li>Home</li>
				<li>|</li>
				<li><a href="#fsection">Submit Ideas</a></li>
				<li>|</li>
				<li><a href="#fsection">Projects</a></li>
				<li>|</li>
				<li class="rtopmenu-li-img">
 				<div class="dropdown-hover">
				<img class="rtopmenu-img" src="images/pic.jpg">
				<img src="images/opt.png" style="padding-bottom: 4px; padding-left:10px;" onclick="togglelogout();">
				</div>
				<div class="dropdown-content">
				<ul><li>
					<a class='inline' href="#inline_content">View my profile</a></li> 
					<li>
					<a href="index.html"> Logout
					</a></li>
					</ul>
				</div>
				</li>
			</ul>
		</div>
	</div>
	<div class="banner-h"></div>
	


		<div class="readpane">
			<div class="leftpane">
			<div><img src="images/news.png"></div>
			<div><fieldset class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 1</li>
  							<li><a class='inline' href="#inline_content">Inline HTML</a></li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
						</div>
			</div>
			<div class="leftpane">
			<div><img src="images/news.png"></div>
			<div><fieldset  class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 2</li>
  							<li>News 2</li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
						</div>
			</div>
			<div class="leftpane">
			<div><img src="images/events.png"></div>
			<div><fieldset  class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 3</li>
  							<li>News 2</li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
						</div>
			</div>
			<div class="leftpane">
			<div><img src="images/events.png"></div>
			<div><fieldset  class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 4</li>
  							<li>News 2</li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
				</div>
			</div>
			
		</div>

	</div>
    <div class="w3-teal footer"></div>
    
    <!-- This contains the hidden content for inline calls -->

		<div style='display:none' id="profilediv">
		<div id='inline_content' style='padding:10px; background:#fff;'>
		<div id="page-wrap">
		    <div id="profile-stuff">
		        <div id="profile-top">
		            <div id="profile-picture-wrap">
		                <div id="profile-picture">
		                <div id="prupld" style="display:none;"><input type="file" class="filestyle" id="primage" name="primage" placeholder="upload image"/></div>
		                <div><img src=""  id="profile-img"/></div>
		                </div>
		            </div>
		            <div id="profile-top-right">
		                <div id="user-name" class="username">
		                </div>
		            </div>
		        </div>
		        <div id="cover-wrap">
		            <div id="fact-wrap">
		                <div class="user-fact" id="user-role">
		                
		                </div>
		                
		            </div>
		            <div class="form-style-5">
					<form>
					<fieldset>
					<legend><span class="number">1</span> Personal Info</legend>
					<input type="text" name="prname" id="prname" placeholder="Your Name *" readonly="readonly">
					<input type="email" name="premail" id="premail" placeholder="Your Email *" readonly="readonly">
					<input type="text" name="prmobile" id="prmobile" placeholder="Your Mobile +91-*">
					<input type="text" name="prcollege" id="prollege" placeholder="Your College *">
					<input type="text" name="pruniv" id="pruniv" placeholder="Your University *">
					<input type="text" name="prstream" id="prstream" placeholder="Your Stream *">
					<input type="text" name="pryear" id="pryear" placeholder="Your Passing year *">
					<input type="text" name="prdob" id="prdob" placeholder="Your Date of Birth *">
					<input type="hidden" name="session_id" id="session_id" value="">
					<textarea name="printarea" id="printarea" placeholder="Interest Area "></textarea>
					
					<legend><span class="number">2</span> Additional Info</legend>
					<textarea name="pryourself" id="pryourself" placeholder="About Yourself "></textarea>
					
					<button type="button" class="prbutton" onclick="updateProfile(); return false;">Update Profile</button>
					</fieldset>
					</form>
					
					</div>
		        </div>
					
		    </div>
		    </div>
		    </div>
		    </div>
    
    <script type="text/javascript" src="js/jquery-3.2.1.min.js"> </script>
    <script type="text/javascript" src="js/jquery.getUrlParam.js"> </script>
    <script type="text/javascript" src="js/colorbox/jquery.colorbox.js"> </script>
    <script type="text/javascript" src="js/bootstrap-filestyle.js"> </script>
    <script type="application/javascript">
    
    function togglelogout() {
    	$('.dropdown-content').toggle();
    }
    
	$("#primage").filestyle({
		placeholder: 'Picture',
		text: 'Upload Image',
		btnClass : 'btn-secondary'
	});
			$( document ).ready(function() {
				
				$(".inline").colorbox({inline:true, width:"80%", height: "100%"});
				
				var session_id = $(document).getUrlParam("session_id");
				var url = 'http://127.0.0.1:8080/TechConnectWebDb/pullRecord.htm?session_id=' + session_id;
				$.ajax({
					crossDomain: true,
		             type: "GET",
		             url: url,
		             contentType: "application/x-www-form-urlencoded",
		             dataType: "xml",
		            success: function (msg) {
		                //debugger;
		                //if(msg== null ) {
		                //	window.open("index.html","_self");
		                //}
		                $('#pname').text(msg.getElementsByTagName('first-name')[0].innerHTML);
		                $('#user-name').text( msg.getElementsByTagName('first-name')[0].innerHTML + ' ' + msg.getElementsByTagName('last-name')[0].innerHTML);
		                $('#prname').val( msg.getElementsByTagName('first-name')[0].innerHTML + ' ' + msg.getElementsByTagName('last-name')[0].innerHTML);
		                $('#user-role').text(msg.getElementsByTagName('role')[0].innerHTML);
		                $('#premail').val(msg.getElementsByTagName('email-id')[0].innerHTML);
		                if(typeof msg.getElementsByTagName('college')[0] != "undefined" ) {
		                	$('#prcollege').val(msg.getElementsByTagName('college')[0].innerHTML);
		                }
		                if(typeof msg.getElementsByTagName('image-file')[0] != "undefined" ) {
		                	$('#profile-img').attr('src',msg.getElementsByTagName('image-file')[0].innerHTML);
		                }else {
		                	$('#prupld').show();
		                }
		                $('#profilemenu').text('Profile (' + msg.firstElementChild.getAttribute('profile-percent') + '%)');
		            },
		            error: function (xhr, status, error) {
		                //debugger;
		            }
		        });
				
				var toggleClick = function(){

			        var divObj = $('.dropdown-content').next();
			        var nstyle = divObj.css("display");

			        if(nstyle == "none"){
			            divObj.slideDown(false,function(){
			                $("html").bind("click",function(){
			                    divObj.slideUp();
			                    $("html").unbind("click");
			                });
			            });
			        }
			    };

			    $(".rtopmenu-li-img").click(toggleClick);
			    
			});
			
			function updateProfile() {
				$('#profilediv').hide();
				var session_id = $(document).getUrlParam("session_id");
				var data = $('#profileform').serialize();
				var url = 'http://127.0.0.1:8080/TechConnectWebDb/updateProfile.htm?session_id=' + session_id;
				$.ajax({
					crossDomain: true,
		             type: "post",
		             url: url,
		             data: data,
		             contentType: "application/x-www-form-urlencoded",
		             dataType: "xml",
		            success: function (msg) {
		                location.reload();
		            },
		            error: function (xhr, status, error) {
		                //debugger;
		            }
		        });
			}
	</script>
</body>
</html>
