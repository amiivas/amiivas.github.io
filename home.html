<!DOCTYPE html>
<html>
<title>TechConnects</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/signup.css">
<link rel="stylesheet" href="css/colorbox.css">
<link rel="stylesheet" href="css/tc.css">
<style>


</style>

<body>
	
	<div class="topmenubanner-h">
		<div class="ltopmenu-h">
			<ul>
				<li><em style="font-size: 20px;">TECHCONNECTS</em></li>
			</ul>
		</div>
		<div class="rtopmenu-h">
			<ul>
				<li>Home</li>
				<li>|</li>
				<li><a href="#fsection">Submit Ideas</a></li>
				<li>|</li>
				<li><a href="#fsection">Projects</a></li>
				<li>|</li>
				<li class="rtopmenu-li-img">
 				<div class="dropdown-hover">
				<a href="#" class="dropdown-a"><img class="rtopmenu-img" src="images/pic.jpg">
				<img src="images/opt.png" style="padding-bottom: 4px; padding-left:10px;"></a>
				</div>
				<div class="dropdown-content">
				<ul><li>
					<a class='inline' href="#inline_content">View my profile</a></li> 
					<li>
					<a href="index.html"> Logout
					</a></li>
					</ul>
				</div>
				</li>
			</ul>
		</div>
	</div>
	<div class="banner-h"></div>
	


		<div class="readpane">
			<div class="leftpane">
			<div><img src="images/news.png"></div>
			<div><fieldset class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 1</li>
  							<li><a class='inline' href="#inline_content" onclick="hideImages();">Inline HTML</a></li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
						</div>
			</div>
			<div class="leftpane">
			<div><img src="images/news.png"></div>
			<div><fieldset  class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 2</li>
  							<li>News 2</li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
						</div>
			</div>
			<div class="leftpane">
			<div><img src="images/events.png"></div>
			<div><fieldset  class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 3</li>
  							<li>News 2</li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
						</div>
			</div>
			<div class="leftpane">
			<div><img src="images/events.png"></div>
			<div><fieldset  class="items">This area will include any news about technology world. This will be definite area and a more link will be provided in bottom to go to more news. News page will be there in the horizontal menu also.
						<ul style="margin-left:-1.5em">
  							<li>div 4</li>
  							<li>News 2</li>
  							<li>News 3</li>
  							<li><a href="#" >More..</a></li>
						</ul> 
						
						</fieldset>
				</div>
			</div>
			
		</div>

	</div>
    <div class="w3-teal footer"></div>
    
    <!-- This contains the hidden content for inline calls -->

	<div style='display: none' id="profilediv">
		<div id='inline_content' style='padding: 10px; background: #fff;'>
			<form id="profileForm" method="post" enctype="multipart/form-data">
				<div id="page-wrap">
					<div id="profile-top-bar">
						<div id="profile-picture">
							<div id="prupld" style="display: none;">
								<input type="file"  id="primage" name="primage" class="classfile"
									placeholder="upload image" onchange="changelabel(this.value)"/>
									<label for="primage" onclick="togglepic(); return false;" id="uploadpic">Upload Image</label>
									<label for="primage" style="display: none;" id="picname">check</label>
							</div>
							<div>
								<img src="" id="profile-img" style="display:none;" />
							</div>
						</div>
						<div id="profile-top-right">
							<div id="user-name" class="username">Amit Srivastav</div>
								<div id="fact-wrap">
									<div class="user-fact" id="user-role">Student</div>
								</div>
						</div>
					</div>
					
		            <div class="form-style-5">
					
					<fieldset>
					<legend><span class="number">1</span> Personal Info</legend>
					<label>Full Name</label><input type="text" name="prname" id="prname" placeholder="Your Name *" readonly="readonly">
					<label>Email</label><input type="email" name="premail" id="premail" placeholder="Your Email *" readonly="readonly">
					<label>Mobile</label><input type="text" name="prmobile" id="prmobile" placeholder="Your Mobile +91-*">
					<label>College</label><input type="text" name="prcollege" id="prcollege" placeholder="Your College *">
					<label>University</label><input type="text" name="pruniv" id="pruniv" placeholder="Your University *">
					<label>Stream</label><input type="text" name="prstream" id="prstream" placeholder="Your Stream *">
					<label>Year</label><input type="text" name="pryear" id="pryear" placeholder="Your Passing year *">
					<label>Date of Birth</label><input type="text" name="prdob" id="prdob" placeholder="Your Date of Birth *">
					<input type="hidden" name="session_id" id="session_id" value="">
					<label>Interest Area</label><textarea name="printarea" id="printarea" placeholder="Interest Area "></textarea>
					
					<legend><span class="number">2</span> Additional Info</legend>
					<textarea name="pryourself" id="pryourself" placeholder="About Yourself "></textarea>
					
					<button type="button" class="prbutton" onclick="updateProfile(); return false;">Update Profile</button>
					</fieldset>
					
					</div>
		        </div>
		        </form>
					
		    </div>
		    </div>
		    

		<script type="text/javascript" src="js/jquery-3.2.1.min.js">
			
		</script>
		<script type="text/javascript" src="js/jquery.getUrlParam.js"> </script>
		<script type="text/javascript" src="js/colorbox/jquery.colorbox.js"> </script>
		<script type="text/javascript" src="js/bootstrap-filestyle.js"> </script>
		<script type="application/javascript">
    
    function togglelogout() {
    	$('.dropdown-content').toggle();
    }
    
    function togglepic() {
    	$('#uploadpic').hide();
    	
    	$('#primage').click();
    	
    	   	
    }
    
    function hideImages() {
    	document.getElementById('picname').style.display = 'none';
    	document.getElementById('uploadpic').style.display = 'block';
    	document.getElementById('profile-img').style.display = 'none';
    }
    function changelabel(filepath) {
    	
    	var filearray  = filepath.split('\\');
    	$('#picname').text(filearray[2]);
    	
    	document.getElementById('picname').style.display = 'block';
    	
    }
    
/* 	$("#primage").filestyle({
		placeholder: 'Picture',
		text: 'Upload Image',
		btnClass : 'btn-secondary'
	}); */
			$( document ).ready(function() {
				
		    	
				$(".inline").colorbox({inline:true, width:"80%", height: "100%"});
				
				var session_id = $(document).getUrlParam("session_id");
				//var url = 'http://localhost.tmmna.com:8080/TechConnectWebDb/pullRecord.htm?session_id=' + session_id;
				var url = 'https://ec2-18-221-3-118.us-east-2.compute.amazonaws.com/TechConnectWebDb/pullRecord.htm?session_id=' + session_id;
				$.ajax({
					crossDomain: true,
		             type: "GET",
		             url: url,
		             contentType: "application/x-www-form-urlencoded",
		             dataType: "xml",
		            success: function (msg) {
		                //debugger;
		                //if(msg== null ) {
		                //	window.open("index.html","_self");
		                //}
		                $('#pname').text(msg.getElementsByTagName('first-name')[0].innerHTML);
		                $('#user-name').text( msg.getElementsByTagName('first-name')[0].innerHTML + ' ' + msg.getElementsByTagName('last-name')[0].innerHTML);
		                $('#prname').val( msg.getElementsByTagName('first-name')[0].innerHTML + ' ' + msg.getElementsByTagName('last-name')[0].innerHTML);
		                $('#user-role').text(msg.getElementsByTagName('role')[0].innerHTML);
		                $('#premail').val(msg.getElementsByTagName('email-id')[0].innerHTML);
		                if(typeof msg.getElementsByTagName('mobile')[0] != "undefined" ) {
		                	$('#prmobile').val(msg.getElementsByTagName('mobile')[0].innerHTML);
		                }		                
		                if(typeof msg.getElementsByTagName('college')[0] != "undefined" ) {
		                	$('#prcollege').val(msg.getElementsByTagName('college')[0].innerHTML);
		                }
		                if(typeof msg.getElementsByTagName('university')[0] != "undefined" ) {
		                	$('#pruniv').val(msg.getElementsByTagName('university')[0].innerHTML);
		                }
		                if(typeof msg.firstElementChild.getAttribute('year') != "undefined" ) {
		                	$('#pryear').val(msg.firstElementChild.getAttribute('year'));
		                }
		                if(typeof msg.getElementsByTagName('stream')[0] != "undefined" ) {
		                	$('#prstream').val(msg.getElementsByTagName('stream')[0].innerHTML);
		                }
		                if(typeof msg.getElementsByTagName('dob')[0] != "undefined" ) {
		                	$('#prdob').val(msg.getElementsByTagName('dob')[0].innerHTML);
		                }
		                if(typeof msg.getElementsByTagName('interest_area')[0] != "undefined" ) {
		                	$('#printarea').val(msg.getElementsByTagName('interest-area')[0].innerHTML);
		                }
		                if(typeof msg.getElementsByTagName('profile')[0] != "undefined" ) {
		                	$('#pryourself').val(msg.getElementsByTagName('profile')[0].innerHTML);
		                }
		                
		               if(typeof msg.getElementsByTagName('image-file')[0] != "undefined" && msg.getElementsByTagName('image-file')[0].innerHTML.trim() != '') {
		            	   document.getElementById('profile-img').style.display = 'block';
		                	$('#profile-img').attr('src',msg.getElementsByTagName('image-file')[0].innerHTML);
		                }else { 
		                	$('#prupld').show();
		                }
		                $('#profilemenu').text('Profile (' + msg.firstElementChild.getAttribute('profile-percent') + '%)');
		            },
		            error: function (xhr, status, error) {
		                //debugger;
		            }
		        });
				
				var toggleClick = function(){

					var divObj = $('.dropdown-content');
			        var nstyle = divObj.css("display");

			        if(nstyle == "none"){
			            divObj.slideDown(false,function(){
			                $("html").bind("click",function(){
			                    divObj.slideUp();
			                    $("html").unbind("click");
			                });
			            });
			        }
			    };

			    $(".dropdown-a").click(toggleClick);
			    
			});
			
			function updateProfile() {
				$('#profilediv').hide();
				var session_id = $(document).getUrlParam("session_id");
				var form = $('#profileForm')[0];
				var data = new FormData(form);
				//var url = 'http://localhost.tmmna.com:8080/TechConnectWebDb/updateProfile.htm?session_id=' + session_id;
				var url = 'https://ec2-18-221-3-118.us-east-2.compute.amazonaws.com/TechConnectWebDb/updateProfile.htm?session_id=' + session_id;
				
				$.ajax({
					crossDomain: true,
		             type: "post",
		             url: url,
		             data: data,
		             enctype:"multipart/form-data",
		             processData: false,
		             contentType: false,
		             cache: false,
		             timeout: 600000,
		             dataType:"text",
		            success: function (msg) {
		                location.reload();
		            },
		            error: function (xhr, status, error) {
		                //debugger;
		            }
		        });
			}
	</script>
</body>
</html>
